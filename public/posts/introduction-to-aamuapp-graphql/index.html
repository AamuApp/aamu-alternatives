<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Introduction to Aamu.app GraphQL | Aamu.app blog</title>
<meta name="keywords" content="graphql">
<meta name="description" content="How to use the database from a distance">
<meta name="author" content="Ilkka Huotari">
<link rel="canonical" href="https://dev.aamu.app/blog/posts/introduction-to-aamuapp-graphql/">
<link crossorigin="anonymous" href="/blog/assets/css/stylesheet.98081d22d4c1a9a21e9fc332257d0773220077ef4160638482ee8434a4d72507.css" integrity="sha256-mAgdItTBqaIen8MyJX0HcyIAd&#43;9BYGOEgu6ENKTXJQc=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://st.aamu.app/img/logo-160-wbg.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://dev.aamu.app/blog/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://dev.aamu.app/blog/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://dev.aamu.app/blog/apple-touch-icon.png">
<link rel="mask-icon" href="https://dev.aamu.app/blog/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
	<style media="screen">
		.imgB-86b877efc5c2e3d8b653bdd451d77459-GIP {
			background: linear-gradient(#ffffff, #e10298); background-size: cover; background-repeat: no-repeat; aspect-ratio: 5000 / 1364;
		}
		.imgB-86b877efc5c2e3d8b653bdd451d77459-LQIP {
			background: url(data:image/jpeg;base64,/9j/2wCEACgcHiMeGSgjISMtKygwPGRBPDc3PHtYXUlkkYCZlo+AjIqgtObDoKrarYqMyP/L2u71////m8H////6/+b9//gBKy0tPDU8dkFBdviljKX4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+P/AABEIAAUAFAMBIgACEQEDEQH/xAGiAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgsQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+gEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoLEQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/ANcqS4OccUu0/wB40v8AEPpRQO4UUUUCP//Z); background-size: cover; background-repeat: no-repeat; aspect-ratio: 5000 / 1364;
		}
		.imgB-2228eadd1646fe56ae952aa2e34b5818-GIP {
			background: linear-gradient(#fefefe, #000000); background-size: cover; background-repeat: no-repeat; aspect-ratio: 438 / 203;
		}
		.imgB-2228eadd1646fe56ae952aa2e34b5818-LQIP {
			background: url(data:image/jpeg;base64,/9j/2wCEACgcHiMeGSgjISMtKygwPGRBPDc3PHtYXUlkkYCZlo+AjIqgtObDoKrarYqMyP/L2u71////m8H////6/+b9//gBKy0tPDU8dkFBdviljKX4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+P/AABEIAAkAFAMBIgACEQEDEQH/xAGiAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgsQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+gEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoLEQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/ANkdetFFFABRRRQB/9k=); background-size: cover; background-repeat: no-repeat; aspect-ratio: 438 / 203;
		}
		.imgB-11fbf6857ed5a61c94940a4ba8e69e79-GIP {
			background: linear-gradient(#f9fbf9, #000000); background-size: cover; background-repeat: no-repeat; aspect-ratio: 449 / 460;
		}
		.imgB-11fbf6857ed5a61c94940a4ba8e69e79-LQIP {
			background: url(data:image/jpeg;base64,/9j/2wCEACgcHiMeGSgjISMtKygwPGRBPDc3PHtYXUlkkYCZlo+AjIqgtObDoKrarYqMyP/L2u71////m8H////6/+b9//gBKy0tPDU8dkFBdviljKX4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+P/AABEIABQAFAMBIgACEQEDEQH/xAGiAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgsQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+gEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoLEQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/ANkUU0g5/wDrUDPt+VADqKKKAE2g0BQKWigAooooA//Z); background-size: cover; background-repeat: no-repeat; aspect-ratio: 449 / 460;
		}
		.imgB-4af61bc0d141c49126136dca76661de6-GIP {
			background: linear-gradient(#393e47, #bcc1c6); background-size: cover; background-repeat: no-repeat; aspect-ratio: 544 / 219;
		}
		.imgB-4af61bc0d141c49126136dca76661de6-LQIP {
			background: url(data:image/jpeg;base64,/9j/2wCEACgcHiMeGSgjISMtKygwPGRBPDc3PHtYXUlkkYCZlo+AjIqgtObDoKrarYqMyP/L2u71////m8H////6/+b9//gBKy0tPDU8dkFBdviljKX4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+P/AABEIAAgAFAMBIgACEQEDEQH/xAGiAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgsQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+gEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoLEQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/AKQQYFGwUo6ClpiG7QKXaPT9KWigD//Z); background-size: cover; background-repeat: no-repeat; aspect-ratio: 544 / 219;
		}
		.imgB-2021f054629b629ca907a765e8cc34dd-GIP {
			background: linear-gradient(#fefefe, #000000); background-size: cover; background-repeat: no-repeat; aspect-ratio: 444 / 291;
		}
		.imgB-2021f054629b629ca907a765e8cc34dd-LQIP {
			background: url(data:image/jpeg;base64,/9j/2wCEACgcHiMeGSgjISMtKygwPGRBPDc3PHtYXUlkkYCZlo+AjIqgtObDoKrarYqMyP/L2u71////m8H////6/+b9//gBKy0tPDU8dkFBdviljKX4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+P/AABEIAA0AFAMBIgACEQEDEQH/xAGiAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgsQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+gEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoLEQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/ANkdf/r0UUUAFFFFAH//2Q==); background-size: cover; background-repeat: no-repeat; aspect-ratio: 444 / 291;
		}
		.imgB-998c41f4ff88137fcd7fc55871378199-GIP {
			background: linear-gradient(#fcfdfc, #000000); background-size: cover; background-repeat: no-repeat; aspect-ratio: 463 / 341;
		}
		.imgB-998c41f4ff88137fcd7fc55871378199-LQIP {
			background: url(data:image/jpeg;base64,/9j/2wCEACgcHiMeGSgjISMtKygwPGRBPDc3PHtYXUlkkYCZlo+AjIqgtObDoKrarYqMyP/L2u71////m8H////6/+b9//gBKy0tPDU8dkFBdviljKX4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+P/AABEIAA8AFAMBIgACEQEDEQH/xAGiAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgsQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+gEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoLEQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/ANjv/wDXpaQjmlHSgAooooA//9k=); background-size: cover; background-repeat: no-repeat; aspect-ratio: 463 / 341;
		}
		.imgB-1c6fc44bd9873c2cce348f266f4c0c37-GIP {
			background: linear-gradient(#f9faf9, #3b87f1); background-size: cover; background-repeat: no-repeat; aspect-ratio: 552 / 464;
		}
		.imgB-1c6fc44bd9873c2cce348f266f4c0c37-LQIP {
			background: url(data:image/jpeg;base64,/9j/2wCEACgcHiMeGSgjISMtKygwPGRBPDc3PHtYXUlkkYCZlo+AjIqgtObDoKrarYqMyP/L2u71////m8H////6/+b9//gBKy0tPDU8dkFBdviljKX4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+P/AABEIABEAFAMBIgACEQEDEQH/xAGiAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgsQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+gEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoLEQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/ANdjtG7k/Tmmed/sSf8AfBqXtRketMRDvDHOHH1yKMj/AGvzNPYZPNJtFIY8/dpKU/dpKAEbrSUrdaSgD//Z); background-size: cover; background-repeat: no-repeat; aspect-ratio: 552 / 464;
		}
		.imgB-5f8b595a94f898435bb58987011d069c-GIP {
			background: linear-gradient(#fafbfa, #3d88ed); background-size: cover; background-repeat: no-repeat; aspect-ratio: 478 / 299;
		}
		.imgB-5f8b595a94f898435bb58987011d069c-LQIP {
			background: url(data:image/jpeg;base64,/9j/2wCEACgcHiMeGSgjISMtKygwPGRBPDc3PHtYXUlkkYCZlo+AjIqgtObDoKrarYqMyP/L2u71////m8H////6/+b9//gBKy0tPDU8dkFBdviljKX4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+Pj4+P/AABEIAA0AFAMBIgACEQEDEQH/xAGiAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgsQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+gEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoLEQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/ANV5Y42wzAGhJUkOEfJp/vRu56U9BC0UUUhn/9k=); background-size: cover; background-repeat: no-repeat; aspect-ratio: 478 / 299;
		}
	</style>
<meta property="og:title" content="Introduction to Aamu.app GraphQL" />
<meta property="og:description" content="How to use the database from a distance" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://dev.aamu.app/blog/posts/introduction-to-aamuapp-graphql/" />
<meta property="og:image" content="https://dev.aamu.app/blog/1634671479716.jpg" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-10-19T09:00:00+00:00" />
<meta property="article:modified_time" content="2021-10-19T09:00:00+00:00" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://dev.aamu.app/blog/1634671479716.jpg" />
<meta name="twitter:title" content="Introduction to Aamu.app GraphQL"/>
<meta name="twitter:description" content="How to use the database from a distance"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://dev.aamu.app/blog/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Introduction to Aamu.app GraphQL",
      "item": "https://dev.aamu.app/blog/posts/introduction-to-aamuapp-graphql/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Introduction to Aamu.app GraphQL",
  "name": "Introduction to Aamu.app GraphQL",
  "description": "How to use the database from a distance",
  "keywords": [
    "graphql"
  ],
  "articleBody": "Aamu.app database supports two APIs: you can submit data into a database via just standard html forms – this works just one direction – to add data into the database. Also, you can get and put data into the database via GraphQL.\nAs Wikipedia says it, “GraphQL is an open-source data query and manipulation language”. It’s a query language, and it has a syntax for reading and writing the database. For testing it out, it is helpful to have a tool. I like Altair.\nTo use Altair, or any similar tool, you first need to setup it with some information about your database; the database endpoint and the database API key. You can get the API key from the database settings. The database endpoint is this: https://api.aamu.app/api/v1/graphql/.\nAfter you have set those, there is the option to the get database schema. The schema will help you to query the database. In Altair the schema is called Docs. If you change the database structure, you can refresh the schema in the tool of your choice. In Altair, there is a refresh icon, which has a tooltip to Reload Docs.\nYou can browse around the schema. On the top, the schema has the following parts: Query and Mutation, which stand for reading and writing.\nQuerying the database Let’s see, what we have in Query. We see that there are some fields, which correspond to our sheets (or tables) in our database. I am using the aamu-blog as an example, and in the aamu-blog there are two sheets: Blog post and Person.\nFor each sheet there are two ways to query it: to get one specific row from it and to get multiple rows. Let’s go through each case.\nTo get a single row, in this case a blog post, you would query it through one of its unique fields. You can set the field as unique by editing the column properties in the database sheet. There is a checkmark that makes the column unique. For blog posts, the slug is marked as unique. Slug stands for “part of the url”:\nSo, you can get these blog posts by knowing its slug or by its ID. In practice, in this blog application, you would use the slug, as that is something that you know – the user will enter the url in the browser and that url will have the slug. So you use that slug the retrieve the correct blog post.\nHere is an example how you would query a single blog post (this particular one). In the parenthesis you would enter the unique field and in the braces you would enter the fields that the query should return for this particular item.\nquery { BlogPost (slug: \"introduction-to-aamuapp-graphql\") { id created updated title slug description body publishDate status } } You can also get items by querying the field BlogPostCollection. This gives you from zero to multiple rows. You can also do filtering, sorting and pagination. In practice you probably will want to do at least filtering.\nLet’s see how the filtering goes. By clicking filter, you will get a list of fields by which you can filter. In practice you can filter by any field in the sheet.\nLet’s see how aamu-blog gets the blog posts for its main page. It will filter by status and sort by publishDate. Here is the query:\nquery { BlogPostCollection( filter: { status: { EQ: \"published\" } } sort: { publishDate: DESC } ) { title slug publishDate description } } You will notice that we have used EQ to filter for status. For retrieving single items through unique fields this isn’t needed, as the item is always retrieving by the exact same value, but for retrieving multiple items there are more possibilities. In Altair, you can get help by pressing Ctrl + space. Altair will give you a list of options how you can filter, like this:\nEQ stands for “equals”, GT stands for “greater than”, LT stands for “less than”, etc.\nFor sorting, you can get similar help. There are two ways to sort, ascending and descending:\nPagination is pretty straight forward. You would use it like this:\nquery { BlogPostCollection( filter: { status: { EQ: \"published\" } } sort: { publishDate: DESC } pagination: { limit: 10, skip: 20 } ) { title slug publishDate description } } That covers querying the database.\n",
  "wordCount" : "731",
  "inLanguage": "en",
  "image":"https://dev.aamu.app/blog/1634671479716.jpg","datePublished": "2021-10-19T09:00:00Z",
  "dateModified": "2021-10-19T09:00:00Z",
  "author":{
    "@type": "Person",
    "name": "Ilkka Huotari"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://dev.aamu.app/blog/posts/introduction-to-aamuapp-graphql/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Aamu.app blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://st.aamu.app/img/logo-160-wbg.png"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://dev.aamu.app/blog/" accesskey="h" title="Aamu.app blog (Alt + H)">Aamu.app blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://dev.aamu.app/blog/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://dev.aamu.app/blog/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://dev.aamu.app/blog/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Introduction to Aamu.app GraphQL
    </h1>
    <div class="post-description">
      How to use the database from a distance
    </div>
    <div class="post-meta"><span title='2021-10-19 09:00:00 +0000 UTC'>October 19, 2021</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;Ilkka Huotari

</div>
  </header> 
<figure class="entry-cover">
        <img loading="eager" srcset="https://dev.aamu.app/blog/posts/introduction-to-aamuapp-graphql/1634671479716_hub3205ed3c893c1f053112545244d1e4e_136752_360x0_resize_q75_box.jpg 360w ,https://dev.aamu.app/blog/posts/introduction-to-aamuapp-graphql/1634671479716_hub3205ed3c893c1f053112545244d1e4e_136752_480x0_resize_q75_box.jpg 480w ,https://dev.aamu.app/blog/posts/introduction-to-aamuapp-graphql/1634671479716_hub3205ed3c893c1f053112545244d1e4e_136752_720x0_resize_q75_box.jpg 720w ,https://dev.aamu.app/blog/posts/introduction-to-aamuapp-graphql/1634671479716_hub3205ed3c893c1f053112545244d1e4e_136752_1080x0_resize_q75_box.jpg 1080w ,https://dev.aamu.app/blog/posts/introduction-to-aamuapp-graphql/1634671479716_hub3205ed3c893c1f053112545244d1e4e_136752_1500x0_resize_q75_box.jpg 1500w ,https://dev.aamu.app/blog/posts/introduction-to-aamuapp-graphql/1634671479716.jpg 5000w" 
            sizes="(min-width: 768px) 720px, 100vw" src="https://dev.aamu.app/blog/posts/introduction-to-aamuapp-graphql/1634671479716.jpg" alt="" 
            width="5000" height="1364">
        
</figure>
  <div class="post-content"><p>Aamu.app database supports two APIs: you can submit data into a database via just standard <em>html forms</em> – this works just one direction – to add data into the database. Also, you can get and put data into the database via <em>GraphQL</em>.</p>
<p>As Wikipedia <a href="https://en.wikipedia.org/wiki/GraphQL">says it</a>, &ldquo;GraphQL is an open-source data query and manipulation language&rdquo;. It&rsquo;s a query language, and it has a syntax for reading and writing the database. For testing it out, it is helpful to have a tool. I like <a href="https://altair-gql.sirmuel.design/">Altair</a>.</p>
<p>To use Altair, or any similar tool, you first need to setup it with some information about your database; the database endpoint and the database API key. You can get the API key from the <em>database settings</em>. The database endpoint is this: <code>https://api.aamu.app/api/v1/graphql/</code>.</p>
<p>After you have set those, there is the option to the get database schema. The schema will help you to query the database. In Altair the schema is called <em>Docs</em>. If you change the database structure, you can refresh the schema in the tool of your choice. In Altair, there is a refresh icon, which has a tooltip to <em>Reload Docs</em>.</p>
<p><div class="relative bg-center imgB-2228eadd1646fe56ae952aa2e34b5818-GIP">
        <picture>
            <source type="image/webp" srcset="/blog/posts/introduction-to-aamuapp-graphql/1634699877668_hu8c784b0b3c1f16a3c367cf2ee3509fa3_3220_320x0_resize_q75_h2_box.webp 320w" sizes="(min-width: 1024px) 100vw, 50vw" />
            <source type="image/jpeg" srcset="/blog/posts/introduction-to-aamuapp-graphql/1634699877668_hu8c784b0b3c1f16a3c367cf2ee3509fa3_3220_320x0_resize_q75_box.jpg 320w" sizes="(min-width: 1024px) 100vw, 50vw" />
            <img class="w-full h-auto animate-fade" src="/blog/posts/introduction-to-aamuapp-graphql/1634699877668_hu8c784b0b3c1f16a3c367cf2ee3509fa3_3220_640x0_resize_q75_box.jpg" alt="" title="" loading="lazy" />
        </picture>
    </div></p>
<p>You can browse around the schema. On the top, the schema has the following parts: <em>Query</em> and <em>Mutation</em>, which stand for reading and writing.</p>
<p><div class="relative bg-center imgB-11fbf6857ed5a61c94940a4ba8e69e79-GIP">
        <picture>
            <source type="image/webp" srcset="/blog/posts/introduction-to-aamuapp-graphql/1634700200591_huf4f15c70b188e7bcf27cd943ed0da8d1_22091_320x0_resize_q75_h2_box.webp 320w" sizes="(min-width: 1024px) 100vw, 50vw" />
            <source type="image/jpeg" srcset="/blog/posts/introduction-to-aamuapp-graphql/1634700200591_huf4f15c70b188e7bcf27cd943ed0da8d1_22091_320x0_resize_q75_box.jpg 320w" sizes="(min-width: 1024px) 100vw, 50vw" />
            <img class="w-full h-auto animate-fade" src="/blog/posts/introduction-to-aamuapp-graphql/1634700200591_huf4f15c70b188e7bcf27cd943ed0da8d1_22091_640x0_resize_q75_box.jpg" alt="" title="" loading="lazy" />
        </picture>
    </div></p>
<h2 id="querying-the-database">Querying the database<a hidden class="anchor" aria-hidden="true" href="#querying-the-database">#</a></h2>
<p>Let&rsquo;s see, what we have in <em>Query</em>. We see that there are some fields, which correspond to our sheets (or tables) in our database. I am using the <em>aamu-blog</em> as an example, and in the aamu-blog there are two sheets: <em>Blog post</em> and <em>Person</em>.</p>
<p>For each sheet there are two ways to query it: to get one specific row from it and to get multiple rows. Let&rsquo;s go through each case.</p>
<p><div class="relative bg-center imgB-2021f054629b629ca907a765e8cc34dd-GIP">
        <picture>
            <source type="image/webp" srcset="/blog/posts/introduction-to-aamuapp-graphql/1634701341708_hu974faa81b2ca13346fb8b8418ee814ff_5120_320x0_resize_q75_h2_box.webp 320w" sizes="(min-width: 1024px) 100vw, 50vw" />
            <source type="image/jpeg" srcset="/blog/posts/introduction-to-aamuapp-graphql/1634701341708_hu974faa81b2ca13346fb8b8418ee814ff_5120_320x0_resize_q75_box.jpg 320w" sizes="(min-width: 1024px) 100vw, 50vw" />
            <img class="w-full h-auto animate-fade" src="/blog/posts/introduction-to-aamuapp-graphql/1634701341708_hu974faa81b2ca13346fb8b8418ee814ff_5120_640x0_resize_q75_box.jpg" alt="" title="" loading="lazy" />
        </picture>
    </div></p>
<p>To get a single row, in this case a blog post, you would query it through one of its <em>unique fields</em>. You can set the field as unique by editing the <em>column properties</em> in the database sheet. There is a checkmark that makes the column <em>unique</em>. For blog posts, the slug is marked as unique. Slug stands for &ldquo;part of the url&rdquo;:</p>
<p><div class="relative bg-center imgB-4af61bc0d141c49126136dca76661de6-GIP">
        <picture>
            <source type="image/webp" srcset="/blog/posts/introduction-to-aamuapp-graphql/1634700713455_hu1d213b464c6477f02af4e89930a351bb_8809_320x0_resize_q75_h2_box.webp 320w" sizes="(min-width: 1024px) 100vw, 50vw" />
            <source type="image/jpeg" srcset="/blog/posts/introduction-to-aamuapp-graphql/1634700713455_hu1d213b464c6477f02af4e89930a351bb_8809_320x0_resize_q75_box.jpg 320w" sizes="(min-width: 1024px) 100vw, 50vw" />
            <img class="w-full h-auto animate-fade" src="/blog/posts/introduction-to-aamuapp-graphql/1634700713455_hu1d213b464c6477f02af4e89930a351bb_8809_640x0_resize_q75_box.jpg" alt="" title="" loading="lazy" />
        </picture>
    </div></p>
<p>So, you can get these blog posts by knowing its <em>slug</em> or by its <em>ID</em>. In practice, in this blog application, you would use the slug, as that is something that you know – the user will enter the url in the browser and that url will have the slug. So you use that slug the retrieve the correct blog post.</p>
<p>Here is an example how you would query a single blog post (this particular one). In the parenthesis you would enter the unique field and in the braces you would enter the fields that the query should return for this particular item.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-graphql" data-lang="graphql"><span class="line"><span class="cl"><span class="kd">query</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nc">BlogPost</span><span class="w"> </span><span class="p">(</span><span class="py">slug</span><span class="p">:</span><span class="w"> </span><span class="s">&#34;introduction-to-aamuapp-graphql&#34;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nc">id</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="py">created</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="py">updated</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="py">title</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="py">slug</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="py">description</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="py">body</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="py">publishDate</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="py">status</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p>You can also get items by querying the field <em>BlogPostCollection</em>. This gives you from zero to multiple rows. You can also do filtering, sorting and pagination. In practice you probably will want to do at least filtering.</p>
<p><div class="relative bg-center imgB-998c41f4ff88137fcd7fc55871378199-GIP">
        <picture>
            <source type="image/webp" srcset="/blog/posts/introduction-to-aamuapp-graphql/1634701474749_hu21f2060dae6111b1941b5835ee670a97_9606_320x0_resize_q75_h2_box.webp 320w" sizes="(min-width: 1024px) 100vw, 50vw" />
            <source type="image/jpeg" srcset="/blog/posts/introduction-to-aamuapp-graphql/1634701474749_hu21f2060dae6111b1941b5835ee670a97_9606_320x0_resize_q75_box.jpg 320w" sizes="(min-width: 1024px) 100vw, 50vw" />
            <img class="w-full h-auto animate-fade" src="/blog/posts/introduction-to-aamuapp-graphql/1634701474749_hu21f2060dae6111b1941b5835ee670a97_9606_640x0_resize_q75_box.jpg" alt="" title="" loading="lazy" />
        </picture>
    </div></p>
<p>Let&rsquo;s see how the filtering goes. By clicking <em>filter</em>, you will get a list of fields by which you can filter. In practice you can filter by any field in the sheet.</p>
<p>Let&rsquo;s see how <em>aamu-blog</em> gets the blog posts for its main page. It will filter by <code>status</code> and sort by <code>publishDate</code>. Here is the query:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-graphql" data-lang="graphql"><span class="line"><span class="cl"><span class="kd">query</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nc">BlogPostCollection</span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="py">filter</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nc">status</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nc">EQ</span><span class="p">:</span><span class="w"> </span><span class="s">&#34;published&#34;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nc">sort</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nc">publishDate</span><span class="p">:</span><span class="w"> </span><span class="nc">DESC</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="py">title</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="py">slug</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="py">publishDate</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="py">description</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p>You will notice that we have used <code>EQ</code> to filter for <code>status</code>. For retrieving single items through unique fields this isn&rsquo;t needed, as the item is always retrieving by the exact same value, but for retrieving multiple items there are more possibilities. In Altair, you can get help by pressing <em>Ctrl + space</em>. Altair will give you a list of options how you can filter, like this:</p>
<p><div class="relative bg-center imgB-1c6fc44bd9873c2cce348f266f4c0c37-GIP">
        <picture>
            <source type="image/webp" srcset="/blog/posts/introduction-to-aamuapp-graphql/1634703813603_hu6090f2b6bbe85dad05ef4817bd26c7d5_27640_320x0_resize_q75_h2_box.webp 320w" sizes="(min-width: 1024px) 100vw, 50vw" />
            <source type="image/jpeg" srcset="/blog/posts/introduction-to-aamuapp-graphql/1634703813603_hu6090f2b6bbe85dad05ef4817bd26c7d5_27640_320x0_resize_q75_box.jpg 320w" sizes="(min-width: 1024px) 100vw, 50vw" />
            <img class="w-full h-auto animate-fade" src="/blog/posts/introduction-to-aamuapp-graphql/1634703813603_hu6090f2b6bbe85dad05ef4817bd26c7d5_27640_640x0_resize_q75_box.jpg" alt="" title="" loading="lazy" />
        </picture>
    </div></p>
<p><code>EQ</code> stands for &ldquo;equals&rdquo;, <code>GT</code> stands for &ldquo;greater than&rdquo;, <code>LT</code> stands for &ldquo;less than&rdquo;, etc.</p>
<p>For sorting, you can get similar help. There are two ways to sort, ascending and descending:</p>
<p><div class="relative bg-center imgB-5f8b595a94f898435bb58987011d069c-GIP">
        <picture>
            <source type="image/webp" srcset="/blog/posts/introduction-to-aamuapp-graphql/1634704152244_hu693fc0bb35967a2ddf5a3cc914347cd2_17094_320x0_resize_q75_h2_box.webp 320w" sizes="(min-width: 1024px) 100vw, 50vw" />
            <source type="image/jpeg" srcset="/blog/posts/introduction-to-aamuapp-graphql/1634704152244_hu693fc0bb35967a2ddf5a3cc914347cd2_17094_320x0_resize_q75_box.jpg 320w" sizes="(min-width: 1024px) 100vw, 50vw" />
            <img class="w-full h-auto animate-fade" src="/blog/posts/introduction-to-aamuapp-graphql/1634704152244_hu693fc0bb35967a2ddf5a3cc914347cd2_17094_640x0_resize_q75_box.jpg" alt="" title="" loading="lazy" />
        </picture>
    </div></p>
<p>Pagination is pretty straight forward. You would use it like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-graphql" data-lang="graphql"><span class="line"><span class="cl"><span class="kd">query</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nc">BlogPostCollection</span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="py">filter</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nc">status</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nc">EQ</span><span class="p">:</span><span class="w"> </span><span class="s">&#34;published&#34;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nc">sort</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nc">publishDate</span><span class="p">:</span><span class="w"> </span><span class="nc">DESC</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="py">pagination</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nc">limit</span><span class="p">:</span><span class="w"> </span><span class="nc">10</span><span class="p">,</span><span class="w"> </span><span class="py">skip</span><span class="p">:</span><span class="w"> </span><span class="nc">20</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="py">title</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="py">slug</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="py">publishDate</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="py">description</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><p>That covers querying the database.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://dev.aamu.app/blog/tags/graphql/">graphql</a></li>
    </ul>
<nav class="paginav">
  <a class="next" href="https://dev.aamu.app/blog/posts/introduction-to-aamu-app/">
    <span class="title">Next »</span>
    <br>
    <span>Introduction to Aamu.app</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2024 <a href="https://dev.aamu.app/blog/">Aamu.app blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
